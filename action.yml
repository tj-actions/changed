name: Changed files
description: Get all changed files
author: tj-actions
inputs:
  separator:
    description: 'Split character for array output'
    required: true
    default: " "
  files:
    description: 'Check for file changes for all files listed (Defaults to the entire repo)'
    required: false
    default: ""

outputs:
  added_files:
    description: List of added files.
    value: ${{ steps.changed_files.outputs.added_files }}
  copied_files:
    description: List of copied files.
    value: ${{ steps.changed_files.outputs.copied_files }}
  deleted_files:
    description: List of deleted files.
    value: ${{ steps.changed_files.outputs.deleted_files }}
  modified_files:
    description: List of modified files.
    value: ${{ steps.changed_files.outputs.modified_files }}
  renamed_files:
    description: List of renamed files.
    value: ${{ steps.changed_files.outputs.renamed_files }}
  changed_files:
    description: List of changed files.
    value: ${{ steps.changed_files.outputs.changed_files }}
  unmerged_files:
    description: List of unmerged files.
    value: ${{ steps.changed_files.outputs.unmerged_files }}
  unknown_files:
    description: List of unknown files.
    value: ${{ steps.changed_files.outputs.unknown_files }}
  all_changed_files:
    description: List of all changed files.
    value: ${{ steps.changed_files.outputs.all_changed_files }}
  all_modified_files:
    description: List of all copied modified and added files
    value: ${{ steps.changed_files.outputs.all_modified_files }}
  all_changed:
    description: Return true only when all files provided using the files input have all changed.
    value: ${{ steps.changed_files.outputs.all_changed }}
  any_changed:
    description: Return true only when any files provided using the files input have changed.
    value: ${{ steps.changed_files.outputs.any_changed }}

runs:
  using: 'composite'
  steps:
    - id: changed_files
      run: |
        export INPUT_FILES="${{ inputs.files }}"
        export INPUT_SEPARATOR="${{ inputs.separator }}"
        bash entrypoint.sh
        unset INPUT_FILES
        unset INPUT_SEPARATOR
      shell: bash

branding:
  icon: file-text
  color: white
